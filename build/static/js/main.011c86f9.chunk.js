(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{22:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(16),s=t.n(c),o=(t(22),t(17)),u=t(7),i=t(3),d=t(4),l=t.n(d),h="/api/persons",b={getPersons:function(){return l.a.get(h).then((function(e){return e.data}))},createPerson:function(e){return l.a.post(h,e).then((function(e){return e.data}))},deletePerson:function(e){return l.a.delete("".concat(h,"/").concat(e))},updatePerson:function(e,n){return l.a.put("".concat(h,"/").concat(e),n).then((function(e){return e.data}))}},j=t(0);function m(e){var n=e.searchName,t=e.handleChangeSearch;return Object(j.jsxs)("p",{children:["Filter Shown With ",Object(j.jsx)("input",{type:"search",value:n,onChange:t})]})}function f(e){var n=e.handleSubmit,t=e.newName,r=e.handleChangeName,a=e.newNumber,c=e.handleChangeNumber;return Object(j.jsxs)("form",{onSubmit:n,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{required:!0,value:t,onChange:r})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{required:!0,type:"tel",value:a,onChange:c})]}),Object(j.jsx)("div",{children:Object(j.jsx)("button",{type:"submit",children:"add"})})]})}var O=function(e){var n=e.person,t=e.setPersons,r=e.persons,a=e.setMessageErrorAdded;return Object(j.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name,"?"))&&b.deletePerson(n.id).then(t(r.filter((function(e){return e.id===n.id?null:e})))).catch((function(e){a("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){a(null)}),5e3)}))},children:"Delete"})};function p(e){var n=e.persons,t=e.searchName,r=e.setPersons,a=e.setMessageErrorAdded;return Object(j.jsx)(j.Fragment,{children:n.map((function(e){return""!==t&&-1===e.name.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())?null:Object(j.jsxs)("p",{children:[e.name,": ",e.number," ",Object(j.jsx)(O,{persons:n,person:e,setPersons:r,setMessageErrorAdded:a})]},e.id)}))})}var v=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],a=n[1],c=Object(r.useState)(""),s=Object(i.a)(c,2),d=s[0],l=s[1],h=Object(r.useState)(""),O=Object(i.a)(h,2),v=O[0],x=O[1],g=Object(r.useState)(""),w=Object(i.a)(g,2),N=w[0],S=w[1],P=Object(r.useState)(null),C=Object(i.a)(P,2),y=C[0],k=C[1],E=Object(r.useState)(null),A=Object(i.a)(E,2),M=A[0],L=A[1],D=Object(r.useState)(null),T=Object(i.a)(D,2),q=T[0],F=T[1],I=function(e){var n=t.find((function(n){return n.id===e})),r=Object(u.a)(Object(u.a)({},n),{},{number:v});b.updatePerson(n.id,r).then((function(n){a(t.map((function(t){return t.id!==e?t:n}))),l(""),x(""),L("Number of ".concat(n.name," was changed to: ").concat(n.number)),setTimeout((function(){L(null)}),5e3)}))};return Object(r.useEffect)((function(){b.getPersons().then((function(e){return a(e)}))}),[]),Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Phonebook"}),Object(j.jsx)(m,{searchName:N,handleChangeSearch:function(e){S(e.target.value)}}),Object(j.jsx)("h2",{children:"Add a new"}),Object(j.jsx)(f,{handleSubmit:function(e){var n=!1;e.preventDefault();var r,c=Object(o.a)(t);try{for(c.s();!(r=c.n()).done;){var s=r.value;if(d===s.name)return window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))?I(s.id):(x(""),l(""),n=!0)}}catch(i){c.e(i)}finally{c.f()}if(!1===n){var u={name:d,number:v};b.createPerson(u).then((function(e){a(t.concat(e)),x(""),l(""),k("".concat(e.name," was added")),setTimeout((function(){k(null)}),5e3)}))}},newName:d,handleChangeName:function(e){l(e.target.value)},newNumber:v,handleChangeNumber:function(e){x(e.target.value)}}),y&&Object(j.jsx)("h2",{className:"successful-message",children:y}),M&&Object(j.jsx)("h2",{className:"successful-message",children:M}),q&&Object(j.jsx)("h2",{className:"error-message",children:q}),Object(j.jsx)("h2",{children:"Numbers"}),Object(j.jsx)(p,{persons:t,setPersons:a,setMessageErrorAdded:F,searchName:N})]})};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(v,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.011c86f9.chunk.js.map